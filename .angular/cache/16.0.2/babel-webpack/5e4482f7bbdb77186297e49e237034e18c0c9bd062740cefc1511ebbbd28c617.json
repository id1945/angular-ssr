{"ast":null,"code":"import { Subject, debounceTime, distinctUntilChanged, filter, switchMap, tap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared/book-store.service\";\nconst _c0 = function (a1) {\n  return [\"/books\", a1];\n};\nfunction SearchComponent_ul_2_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementStart(3, \"p\", 7);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const book_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(3, _c0, book_r5.isbn));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", book_r5.title, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r5.subtitle);\n  }\n}\nfunction SearchComponent_ul_2_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1, \"No results\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SearchComponent_ul_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 3);\n    i0.ɵɵtemplate(1, SearchComponent_ul_2_li_1_Template, 5, 5, \"li\", 4);\n    i0.ɵɵtemplate(2, SearchComponent_ul_2_li_2_Template, 2, 0, \"li\", 5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const results_r2 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", results_r2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !results_r2.length);\n  }\n}\nclass SearchComponent {\n  constructor(service) {\n    this.service = service;\n    this.input$ = new Subject();\n    this.isLoading = false;\n    this.results$ = this.input$.pipe(filter(term => term.length >= 3), debounceTime(500), distinctUntilChanged(), tap(() => this.isLoading = true), switchMap(term => this.service.getAllSearch(term)), tap(() => this.isLoading = false));\n  }\n}\nSearchComponent.ɵfac = function SearchComponent_Factory(t) {\n  return new (t || SearchComponent)(i0.ɵɵdirectiveInject(i1.BookStoreService));\n};\nSearchComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SearchComponent,\n  selectors: [[\"bm-search\"]],\n  decls: 4,\n  vars: 5,\n  consts: [[\"type\", \"search\", \"autocomplete\", \"off\", \"aria-label\", \"Search\", 3, \"input\"], [\"searchInput\", \"\"], [\"class\", \"search-results\", 4, \"ngIf\"], [1, \"search-results\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [3, \"routerLink\"], [\"role\", \"doc-subtitle\"]],\n  template: function SearchComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r6 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"input\", 0, 1);\n      i0.ɵɵlistener(\"input\", function SearchComponent_Template_input_input_0_listener() {\n        i0.ɵɵrestoreView(_r6);\n        const _r0 = i0.ɵɵreference(1);\n        return i0.ɵɵresetView(ctx.input$.next(_r0.value));\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, SearchComponent_ul_2_Template, 3, 2, \"ul\", 2);\n      i0.ɵɵpipe(3, \"async\");\n    }\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"loading\", ctx.isLoading);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(3, 3, ctx.results$));\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { SearchComponent };","map":{"version":3,"names":["Subject","debounceTime","distinctUntilChanged","filter","switchMap","tap","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ɵɵpureFunction1","_c0","book_r5","isbn","ɵɵtextInterpolate1","title","ɵɵtextInterpolate","subtitle","ɵɵtemplate","SearchComponent_ul_2_li_1_Template","SearchComponent_ul_2_li_2_Template","results_r2","length","SearchComponent","constructor","service","input$","isLoading","results$","pipe","term","getAllSearch","ɵɵdirectiveInject","i1","BookStoreService","selectors","decls","vars","consts","template","SearchComponent_Template","rf","ctx","ɵɵlistener","SearchComponent_Template_input_input_0_listener","ɵɵrestoreView","_r6","_r0","ɵɵreference","ɵɵresetView","next","value","SearchComponent_ul_2_Template","ɵɵclassProp","ɵɵpipeBind1"],"sources":["C:\\Users\\duong\\Downloads\\16f-ssr\\src\\app\\search\\search.component.ts","C:\\Users\\duong\\Downloads\\16f-ssr\\src\\app\\search\\search.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { Subject, debounceTime, distinctUntilChanged, filter, switchMap, tap, Observable } from 'rxjs';\r\n\r\nimport { Book } from '../shared/book';\r\nimport { BookStoreService } from '../shared/book-store.service';\r\n\r\n@Component({\r\n  selector: 'bm-search',\r\n  templateUrl: './search.component.html',\r\n  styleUrls: ['./search.component.css']\r\n})\r\nexport class SearchComponent {\r\n  input$ = new Subject<string>();\r\n  isLoading = false;\r\n\r\n  results$: Observable<Book[]>;\r\n\r\n  constructor(private service: BookStoreService) {\r\n    this.results$ = this.input$.pipe(\r\n      filter(term => term.length >= 3),\r\n      debounceTime(500),\r\n      distinctUntilChanged(),\r\n      tap(() => this.isLoading = true),\r\n      switchMap(term => this.service.getAllSearch(term)),\r\n      tap(() => this.isLoading = false)\r\n    );\r\n  }\r\n}\r\n","<input type=\"search\"\r\n  autocomplete=\"off\"\r\n  aria-label=\"Search\"\r\n  [class.loading]=\"isLoading\"\r\n  #searchInput\r\n  (input)=\"input$.next(searchInput.value)\">\r\n\r\n<ul class=\"search-results\" *ngIf=\"results$ | async as results\">\r\n  <li *ngFor=\"let book of results\">\r\n    <a [routerLink]=\"['/books', book.isbn]\">\r\n      {{ book.title }}\r\n      <p role=\"doc-subtitle\">{{ book.subtitle }}</p>\r\n    </a>\r\n  </li>\r\n  <li *ngIf=\"!results.length\">No results</li>\r\n</ul>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}